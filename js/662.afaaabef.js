"use strict";(self["webpackChunkvue_pizza"]=self["webpackChunkvue_pizza"]||[]).push([[662],{2662:function(t,e,i){i.r(e),i.d(e,{default:function(){return et}});var s=i(3396),a=i(9242);const r={class:"container"},o={class:"content__top"},l=(0,s._)("h2",{class:"content__title"},"Все пиццы",-1),c={key:1,class:"content__items"},n={key:0,style:{color:"#fe5f1e","text-decoration":"underline"}};function z(t,e,i,z,p,g){const h=(0,s.up)("Categories"),v=(0,s.up)("Sort"),d=(0,s.up)("PizzaBlock"),u=(0,s.up)("SkeletonBlock");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",o,[(0,s.Wm)(h,{onActiveCat:g.setActiveCat,activeCategory:t.activeCategory},null,8,["onActiveCat","activeCategory"]),(0,s.Wm)(v,{sortBy:t.sortBy,onSort:g.setSortBy},null,8,["sortBy","onSort"])]),l,this.$store.getters.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(a.W3,{key:0,name:"list-complete",class:"content__items",tag:"div"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.searchPizzas.slice(0,t.lengthArr),(t=>((0,s.wg)(),(0,s.j4)(d,{key:t.id,pizza:t},null,8,["pizza"])))),128))])),_:1})),this.$store.getters.loading?((0,s.wg)(),(0,s.iD)("div",c,[(0,s.Wm)(u),(0,s.Wm)(u),(0,s.Wm)(u),(0,s.Wm)(u)])):(0,s.kq)("",!0),this.$store.getters.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:2,onClick:e[0]||(e[0]=e=>t.lengthArr+=4),style:{cursor:"pointer","text-align":"center"}},[t.lengthArr<g.searchPizzas.length?((0,s.wg)(),(0,s.iD)("p",n,"Смотреть еще")):(0,s.kq)("",!0)]))])}var p=i(7139);const g={class:"categories"},h=["onClick"];function v(t,e,i,a,r,o){return(0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.$store.getters.categories,((t,e)=>((0,s.wg)(),(0,s.iD)("li",{onClick:t=>o.setActiveCat(e),key:e,class:(0,p.C_)({active:i.activeCategory===e})},(0,p.zw)(t),11,h)))),128))])])}var d={name:"pizza-categories",props:{activeCategory:[Number]},methods:{setActiveCat(t){this.activeCat=t,this.$emit("activeCat",t)}}},u=i(89);const C=(0,u.Z)(d,[["render",v]]);var k=C;const _={class:"sort"},y={class:"sort__label"},w=(0,s._)("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z",fill:"#2C2C2C"})],-1),m=(0,s._)("b",null,"Сортировка по:",-1),b={key:0,class:"sort__popup"},f=["onClick"];function D(t,e,i,a,r,o){return(0,s.wg)(),(0,s.iD)("div",_,[(0,s._)("div",y,[w,m,(0,s._)("span",{onClick:e[0]||(e[0]=(...t)=>o.setIsVisible&&o.setIsVisible(...t))},(0,p.zw)(i.sortBy),1)]),t.isVisible?((0,s.wg)(),(0,s.iD)("div",b,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.$store.getters.sorts,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>o.setSort(t),key:t},(0,p.zw)(t),9,f)))),128))])])):(0,s.kq)("",!0)])}var S={name:"pizza-sort",props:{sortBy:[String]},data:()=>({isVisible:!1}),methods:{setIsVisible(){this.isVisible=!this.isVisible},setSort(t){this.$emit("sort",t),this.isVisible=!1}}};const B=(0,u.Z)(S,[["render",D]]);var A=B;const P={class:"pizza-block-wrapper list-complete-item"},$={class:"pizza-block"},V=["src"],x={class:"pizza-block__title"},H={class:"pizza-block__selector"},T=["onClick"],W=["onClick"],Z={class:"pizza-block__bottom"},q={class:"pizza-block__price"},K=(0,s._)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M10.8 4.8H7.2V1.2C7.2 0.5373 6.6627 0 6 0C5.3373 0 4.8 0.5373 4.8 1.2V4.8H1.2C0.5373 4.8 0 5.3373 0 6C0 6.6627 0.5373 7.2 1.2 7.2H4.8V10.8C4.8 11.4627 5.3373 12 6 12C6.6627 12 7.2 11.4627 7.2 10.8V7.2H10.8C11.4627 7.2 12 6.6627 12 6C12 5.3373 11.4627 4.8 10.8 4.8Z",fill:"white"})],-1),Y=(0,s._)("span",null,"Добавить",-1),L=(0,s._)("i",null,"2",-1),j=[K,Y,L];function I(t,e,i,a,r,o){return(0,s.wg)(),(0,s.iD)("div",P,[(0,s._)("div",$,[(0,s._)("img",{class:"pizza-block__image",src:i.pizza.imageUrl,alt:"Pizza"},null,8,V),(0,s._)("h4",x,(0,p.zw)(i.pizza.title),1),(0,s._)("div",H,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.pizza.types,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>o.setActiveType(t),key:t,class:(0,p.C_)({active:this.activeType==t})},(0,p.zw)(this.$store.getters.types[t]),11,T)))),128))]),(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.pizza.sizes,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>o.setActiveSize(t),key:t,class:(0,p.C_)({active:this.activeSize===t})},(0,p.zw)(t)+" см. ",11,W)))),128))])]),(0,s._)("div",Z,[(0,s._)("div",q,"от "+(0,p.zw)(i.pizza.price)+" ₽",1),(0,s._)("div",{class:"button button--outline button--add",onClick:e[0]||(e[0]=t=>o.addCart(i.pizza))},j)])])])}var U={name:"pizza-block",props:{pizza:{type:Object,required:!0}},data:()=>({activeSize:0,activeType:0}),methods:{setActiveType(t){this.activeType=t},setActiveSize(t){this.activeSize=t},addCart(t){this.$store.commit("setCart",{id:t.id,title:t.title,size:this.activeSize,type:this.$store.getters.types[this.activeType],price:t.price,rating:t.rating,imageUrl:t.imageUrl,category:t.category})}},mounted(){this.setActiveType(this.pizza.types[0]),this.setActiveSize(this.pizza.sizes[0])}};const M=(0,u.Z)(U,[["render",I]]);var E=M;const N={class:"pizza-block-wrapper list-complete-item"},O=(0,s.uE)('<div class="pizza-block"><div class="pizza-block__image" style="width:260px;height:260px;border-radius:50%;background:#eee;" alt="Pizza"></div><h4 class="pizza-block__title" style="width:100%;height:15px;margin-top:10px;background:#eee;"></h4><div class="pizza-block__selector" style="width:100%;height:87px;background:#eee;"><ul style="width:100%;background:#eee;"></ul><ul style="width:100%;background:#eee;"></ul></div></div>',1),F=[O];function G(t,e,i,a,r,o){return(0,s.wg)(),(0,s.iD)("div",N,F)}var J={name:"skeleton-block"};const Q=(0,u.Z)(J,[["render",G]]);var R=Q,X={name:"main-page",components:{Categories:k,Sort:A,PizzaBlock:E,SkeletonBlock:R},data:()=>({activeCategory:0,sortBy:"популярности",lengthArr:4}),methods:{setActiveCat(t){this.activeCategory=t},setSortBy(t){this.sortBy=t}},mounted(){this.$store.dispatch("fetchPizzas")},computed:{filterPizzas(){return 0===this.activeCategory?this.$store.getters.pizzas:this.$store.getters.pizzas.filter((t=>t.category==this.activeCategory-1))},sortPizzas(){return"популярности"===this.sortBy?[...this.filterPizzas].sort(((t,e)=>e.rating-t.rating)):"цене"===this.sortBy?[...this.filterPizzas].sort(((t,e)=>e.price-t.price)):[...this.filterPizzas].sort(((t,e)=>t.title.localeCompare(e.title)))},searchPizzas(){return this.$store.getters.search?this.sortPizzas.filter((t=>t.title.toLowerCase().includes(this.$store.getters.search.toLowerCase()))):this.sortPizzas}}};const tt=(0,u.Z)(X,[["render",z]]);var et=tt}}]);
//# sourceMappingURL=662.afaaabef.js.map